# ูุธุงู ุงูุนูู ูู ูุถุน ุนุฏู ุงูุงุชุตุงู (Offline Mode)

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุงุญุชุฑุงูู ููุนูู ูู ูุถุน ุนุฏู ุงูุงุชุตุงู ูุณูุญ ูููุงุดูุฑ ุจุงูุนูู ุจุดูู ุทุจูุนู ุนูุฏ ุงููุทุงุน ุงูุฅูุชุฑูุชุ ูุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู ูุชู ูุฒุงููุฉ ุงูุจูุงูุงุช ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชููุงุฆูุงู.

## ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### โ ุงูุนูู ุงููุณุชูุฑ
- **ุนุฏู ุชููู ุงูุนูู**: ูููู ูููุงุดูุฑ ุงูุงุณุชูุฑุงุฑ ูู ุฅุตุฏุงุฑ ุงูููุงุชูุฑ ุญุชู ุนูุฏ ุงููุทุงุน ุงูุฅูุชุฑูุช
- **ุทุจุงุนุฉ ุงูููุงุชูุฑ**: ุฅููุงููุฉ ุทุจุงุนุฉ ุงูููุงุชูุฑ ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
- **ุฅุฏุงุฑุฉ ุงููุฎุฒูู**: ุชุชุจุน ุญุฑูุงุช ุงููุฎุฒูู ุญุชู ูู ูุถุน ุนุฏู ุงูุงุชุตุงู

### โ ุงููุฒุงููุฉ ุงูุฐููุฉ
- **ูุฒุงููุฉ ุชููุงุฆูุฉ**: ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู ูุชู ูุฒุงููุฉ ุฌููุน ุงูุทูุจุงุช ุชููุงุฆูุงู
- **ุฅุนุงุฏุฉ ุงููุญุงููุฉ**: ุฅููุงููุฉ ุฅุนุงุฏุฉ ูุญุงููุฉ ุงูุทูุจุงุช ุงููุงุดูุฉ ูู ุงููุฒุงููุฉ
- **ุชุชุจุน ุงูุญุงูุฉ**: ุนุฑุถ ุญุงูุฉ ูู ุทูุจ (ูุนููุ ูุฒุงููุ ูุงุดู)

### โ ุงูุฃูุงู ูุงูููุซูููุฉ
- **ูุนุฑูุงุช ูุฑูุฏุฉ**: ูู ุทูุจ ูู ูุนุฑู ูุฑูุฏ ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
- **ุชุฎุฒูู ูุคูุช**: ุญูุธ ุงูุจูุงูุงุช ูุญููุงู ููุชุฃูุฏ ูู ุนุฏู ููุฏุงููุง
- **ุชุญูู ูู ุงูุฃุฎุทุงุก**: ุชุณุฌูู ุฌููุน ุงูุฃุฎุทุงุก ูุฅููุงููุฉ ุชุชุจุนูุง

## ููููุฉ ุงูุนูู

### 1. ุนูุฏ ุงููุทุงุน ุงูุฅูุชุฑูุช
```
1. ููุชุดู ุงููุธุงู ุงููุทุงุน ุงูุงุชุตุงู ุชููุงุฆูุงู
2. ูุชู ุฅูุดุงุก ุงูุทูุจ ูู ุฌุฏูู offline_orders
3. ูุชู ุชุฎุฒูู ุงูุจูุงูุงุช ูู ุงูุชุฎุฒูู ุงููุคูุช ุงููุญูู
4. ูููู ุทุจุงุนุฉ ุงููุงุชูุฑุฉ ูู ุงูุจูุงูุงุช ุงููุญููุฉ
5. ูุชู ุนุฑุถ ุฑุณุงูุฉ ูููุณุชุฎุฏู ุนู ุญุงูุฉ ุงูุทูุจ
```

### 2. ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู
```
1. ููุชุดู ุงููุธุงู ุนูุฏุฉ ุงูุงุชุตุงู ุชููุงุฆูุงู
2. ูุชู ูุฒุงููุฉ ุงูุทูุจุงุช ุงููุนููุฉ ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ูุชู ุฅูุดุงุก ุงูุทูุจุงุช ุงูุนุงุฏูุฉ ูุนูุงุตุฑูุง
4. ูุชู ุชุญุฏูุซ ุงููุฎุฒูู ูุญุฑูุงุช ุงููุฎุฒูู
5. ูุชู ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจุงุช ุฅูู "ูุฒุงูู"
```

## ุงูุฌุฏุงูู ุงููุถุงูุฉ

### ุฌุฏูู offline_orders
```sql
- id: ูุนุฑู ุงูุทูุจ
- offline_id: ูุนุฑู ูุฑูุฏ ููุทูุจ ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
- user_id: ูุนุฑู ุงููุณุชุฎุฏู
- cashier_shift_id: ูุนุฑู ูุฑุฏูุฉ ุงููุงุดูุฑ
- total: ุงููุจูุบ ุงูุฅุฌูุงูู
- payment_method: ุทุฑููุฉ ุงูุฏูุน
- status: ุญุงูุฉ ุงูุทูุจ (pending_sync, synced, failed)
- invoice_number: ุฑูู ุงููุงุชูุฑุฉ
- items: ุชูุงุตูู ุนูุงุตุฑ ุงูุทูุจ (JSON)
- stock_movements: ุญุฑูุงุช ุงููุฎุฒูู (JSON)
- sync_error: ุฑุณุงูุฉ ุงูุฎุทุฃ ูู ุญุงูุฉ ุงููุดู
- created_at: ุชุงุฑูุฎ ุงูุฅูุดุงุก
- synced_at: ุชุงุฑูุฎ ุงููุฒุงููุฉ
- sync_attempted_at: ุชุงุฑูุฎ ุขุฎุฑ ูุญุงููุฉ ูุฒุงููุฉ
```

### ุฌุฏูู offline_cache
```sql
- id: ูุนุฑู ุงูุชุฎุฒูู ุงููุคูุช
- user_id: ูุนุฑู ุงููุณุชุฎุฏู
- cache_key: ููุชุงุญ ุงูุชุฎุฒูู ุงููุคูุช
- cache_data: ุงูุจูุงูุงุช ุงููุฎุฒูุฉ (JSON)
- created_at: ุชุงุฑูุฎ ุงูุฅูุดุงุก
- updated_at: ุชุงุฑูุฎ ุงูุชุญุฏูุซ
```

## ุงููููุงุช ุงููุถุงูุฉ/ุงููุญุฏุซุฉ

### Models
- `app/Models/OfflineOrder.php` - ูููุฐุฌ ุงูุทูุจุงุช ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
- `app/Models/OfflineCache.php` - ูููุฐุฌ ุงูุชุฎุฒูู ุงููุคูุช

### Services
- `app/Services/OfflineService.php` - ุฎุฏูุฉ ุฅุฏุงุฑุฉ ุงูุนูููุงุช ูู ูุถุน ุนุฏู ุงูุงุชุตุงู

### Controllers
- `app/Http/Controllers/OfflineController.php` - ูุชุญูู ุฅุฏุงุฑุฉ ุงูุทูุจุงุช ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
- `app/Http/Controllers/CashierController.php` - ุชุญุฏูุซ ูุฏุนู ุงูุนูู ูู ูุถุน ุนุฏู ุงูุงุชุตุงู

### Views
- `resources/js/Pages/Offline/Index.vue` - ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุทูุจุงุช ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
- `resources/js/Pages/Cashier.vue` - ุชุญุฏูุซ ูุงุฌูุฉ ุงููุงุดูุฑ

### Migrations
- `database/migrations/2025_01_20_000000_create_offline_orders_table.php`
- `database/migrations/2025_01_20_000001_create_offline_cache_table.php`

### Commands
- `app/Console/Commands/SyncOfflineOrders.php` - ุฃูุฑ ูุฒุงููุฉ ุงูุทูุจุงุช

### Routes
- ุฅุถุงูุฉ routes ุฌุฏูุฏุฉ ูู `routes/web.php`

## API Endpoints

### ุฅุฏุงุฑุฉ ุงูุทูุจุงุช ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
- `GET /offline` - ุนุฑุถ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- `POST /offline/orders` - ุฅูุดุงุก ุทูุจ ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
- `POST /offline/sync` - ูุฒุงููุฉ ุงูุทูุจุงุช
- `POST /offline/retry` - ุฅุนุงุฏุฉ ูุญุงููุฉ ุงูุทูุจุงุช ุงููุงุดูุฉ
- `POST /offline/cleanup` - ุชูุธูู ุงูุทูุจุงุช ุงููุฒุงููุฉ
- `POST /offline/load-data` - ุชุญููู ุงูุจูุงูุงุช ููุนูู ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
- `GET /offline/check-connection` - ุงูุชุญูู ูู ุญุงูุฉ ุงูุงุชุตุงู
- `GET /offline/stats` - ุฅุญุตุงุฆูุงุช ุงูุทูุจุงุช
- `GET /offline/export` - ุชุตุฏูุฑ ุงูุทูุจุงุช

## ุงูุฃูุงูุฑ ุงููุชุงุญุฉ

### ูุฒุงููุฉ ุงูุทูุจุงุช
```bash
# ูุฒุงููุฉ ุฌููุน ุงูุทูุจุงุช ุงููุนููุฉ
php artisan offline:sync

# ูุฒุงููุฉ ุทูุจุงุช ูุณุชุฎุฏู ูุญุฏุฏ
php artisan offline:sync --user-id=1

# ุฅุนุงุฏุฉ ูุญุงููุฉ ุงูุทูุจุงุช ุงููุงุดูุฉ
php artisan offline:sync --retry-failed
```

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ูููุงุดูุฑ
```
1. ุนูุฏ ุงููุทุงุน ุงูุฅูุชุฑูุชุ ุณูุธูุฑ ูุคุดุฑ "ุบูุฑ ูุชุตู" ูู ุฃุนูู ุงูุดุงุดุฉ
2. ูููู ุงูุงุณุชูุฑุงุฑ ูู ุฅุตุฏุงุฑ ุงูููุงุชูุฑ ุจุดูู ุทุจูุนู
3. ุณูุชู ุนุฑุถ ุฑุณุงูุฉ ุชุคูุฏ ุญูุธ ุงูุทูุจ ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
4. ูููู ุทุจุงุนุฉ ุงููุงุชูุฑุฉ ูู ุงูุจูุงูุงุช ุงููุญููุฉ
5. ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงูุ ุณูุชู ุงููุฒุงููุฉ ุชููุงุฆูุงู
```

### 2. ูููุฏูุฑ
```
1. ุงููุตูู ุฅูู ุตูุญุฉ "ุงูุทูุจุงุช ุงููุญููุธุฉ" ูู ูุงุฌูุฉ ุงููุงุดูุฑ
2. ุนุฑุถ ุฌููุน ุงูุทูุจุงุช ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
3. ูุฑุงุฌุนุฉ ุญุงูุฉ ูู ุทูุจ (ูุนููุ ูุฒุงููุ ูุงุดู)
4. ุฅููุงููุฉ ุงููุฒุงููุฉ ุงููุฏููุฉ ุฃู ุฅุนุงุฏุฉ ุงููุญุงููุฉ
5. ุชุตุฏูุฑ ุงูุจูุงูุงุช ููุชุญููู
```

## ุงููููุฒุงุช ุงููุชูุฏูุฉ

### ๐ ุงููุฒุงููุฉ ุงูุชููุงุฆูุฉ
- ูุญุต ุฏูุฑู ูุญุงูุฉ ุงูุงุชุตุงู ูู 30 ุซุงููุฉ
- ูุฒุงููุฉ ุชููุงุฆูุฉ ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู
- ุฅุนุงุฏุฉ ูุญุงููุฉ ุงูุทูุจุงุช ุงููุงุดูุฉ

### ๐ ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ
- ุฅุญุตุงุฆูุงุช ููุตูุฉ ููุทูุจุงุช ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
- ุชูุงุฑูุฑ ุนู ุงูุทูุจุงุช ุงููุนููุฉ ูุงููุงุดูุฉ
- ุชุตุฏูุฑ ุงูุจูุงูุงุช ููุชุญููู

### ๐ก๏ธ ุงูุฃูุงู ูุงูููุซูููุฉ
- ุชุดููุฑ ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ูุญููุงู
- ูุณุฎ ุงุญุชูุงุทูุฉ ููุจูุงูุงุช
- ุชุชุจุน ุฌููุน ุงูุนูููุงุช

### โก ุงูุฃุฏุงุก
- ุชุฎุฒูู ูุคูุช ุฐูู ููุจูุงูุงุช
- ูุฒุงููุฉ ุชุฏุฑูุฌูุฉ ูุชุฌูุจ ุงูุชุญููู ุงูุฒุงุฆุฏ
- ุชุญุณูู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ ูุญููููุง

#### 1. ุนุฏู ูุฒุงููุฉ ุงูุทูุจุงุช
```
ุงูุณุจุจ: ูุดููุฉ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
ุงูุญู: 
- ุงูุชุญูู ูู ุญุงูุฉ ุงูุงุชุตุงู
- ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุฏูุฉ
- ูุฑุงุฌุนุฉ ุณุฌูุงุช ุงูุฃุฎุทุงุก
```

#### 2. ูุดู ูู ุฅูุดุงุก ุงูุทูุจ
```
ุงูุณุจุจ: ูุดููุฉ ูู ุงูุจูุงูุงุช ุฃู ุงููุฎุฒูู
ุงูุญู:
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ูุฑุงุฌุนุฉ ุงููุฎุฒูู ุงููุชุงุญ
- ุฅุนุงุฏุฉ ุงููุญุงููุฉ
```

#### 3. ุนุฏู ุทุจุงุนุฉ ุงูููุงุชูุฑ
```
ุงูุณุจุจ: ูุดููุฉ ูู ุงููุชุตูุญ ุฃู ุงูุทุงุจุนุฉ
ุงูุญู:
- ุงูุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงูุทุจุงุนุฉ
- ุงุณุชุฎุฏุงู ูุชุตูุญ ูุฎุชูู
- ุทุจุงุนุฉ ูุฏููุฉ ูู ุงูุจูุงูุงุช ุงููุญููุฉ
```

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### ุชุญุณููุงุช ููุชุฑุญุฉ
1. **ูุฒุงููุฉ ูู ุงูููุช ุงููุนูู**: ุงุณุชุฎุฏุงู WebSockets ูููุฒุงููุฉ ุงูููุฑูุฉ
2. **ุชุทุจูู ููุจุงูู**: ุชุทุจูู ุฎุงุต ููุนูู ูู ูุถุน ุนุฏู ุงูุงุชุตุงู
3. **ูุณุฎ ุงุญุชูุงุทูุฉ ูุญููุฉ**: ูุงุนุฏุฉ ุจูุงูุงุช SQLite ูุญููุฉ
4. **ุชุดููุฑ ูุชูุฏู**: ุชุดููุฑ ุฃููู ููุจูุงูุงุช ุงููุญููุฉ
5. **ุชูุงุฑูุฑ ูุชูุฏูุฉ**: ุชุญูููุงุช ููุตูุฉ ููุนูู ูู ูุถุน ุนุฏู ุงูุงุชุตุงู

## ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ูุฑุงุฌุนุฉ ุณุฌูุงุช ุงูุฃุฎุทุงุก ูู `storage/logs/`
- ุงุณุชุฎุฏุงู ุฃูุฑ `php artisan offline:sync` ููุชุญูู ูู ุงููุฒุงููุฉ
- ูุฑุงุฌุนุฉ ุตูุญุฉ ุงูุฅุญุตุงุฆูุงุช ูู ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ

---

**ููุงุญุธุฉ**: ูุฐุง ุงููุธุงู ูุตูู ููุนูู ูู ุจูุฆุงุช ุบูุฑ ูุณุชูุฑุฉ ููุงุชุตุงู ุจุงูุฅูุชุฑูุชุ ููุถูู ุงุณุชูุฑุงุฑูุฉ ุงูุนูู ุฏูู ููุฏุงู ุงูุจูุงูุงุช. 