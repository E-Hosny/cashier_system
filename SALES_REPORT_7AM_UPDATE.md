# تحديث صفحة تقارير المبيعات - الساعة 7 صباحاً

## التحديثات المطبقة

### 1. تعديل توقيت حساب المبيعات
- **قبل التحديث**: كانت المبيعات تُحسب من بداية اليوم (00:00:00) إلى نهاية اليوم (23:59:59)
- **بعد التحديث**: أصبحت المبيعات تُحسب من الساعة 7:00 صباحاً من اليوم المحدد إلى الساعة 7:00 صباحاً من اليوم التالي

### 2. التعديلات في الكنترولر
**ملف**: `app/Http/Controllers/Admin/SalesReportController.php`

```php
// قبل التحديث
$query->whereBetween('created_at', [
    Carbon::parse($dateFrom)->setTime(7, 0, 0), // بداية من الساعة 7 صباحاً
    Carbon::parse($dateFrom)->endOfDay()        // إلى نهاية اليوم
]);

// بعد التحديث
$query->whereBetween('created_at', [
    Carbon::parse($dateFrom)->setTime(7, 0, 0), // بداية من الساعة 7 صباحاً
    Carbon::parse($dateFrom)->addDay()->setTime(7, 0, 0) // إلى الساعة 7 صباحاً من اليوم التالي
]);
```

### 3. التعديلات في الواجهة الأمامية
**ملف**: `resources/js/Pages/Admin/SalesReport.vue`

#### أ. إضافة ملاحظة توضيحية محدثة
```vue
<span class="text-blue-600 font-medium">⚠️ ملاحظة: المبيعات تُحسب من الساعة 7:00 صباحاً إلى الساعة 7:00 صباحاً من اليوم التالي</span>
```

#### ب. تحسين عرض إجمالي المبيعات
```vue
<div class="text-sm text-gray-600 mt-1">
  (من الساعة 7:00 صباحاً {{ getSelectedDateText() }} إلى الساعة 7:00 صباحاً من اليوم التالي)
</div>
```

#### ج. تحسين التاريخ الافتراضي
- إضافة دالة `getTodayDate()` للحصول على تاريخ اليوم الحالي
- إضافة `mounted()` hook لتحميل البيانات تلقائياً عند فتح الصفحة
- تحسين تعيين التاريخ الافتراضي في `data()`

### 4. الميزات الجديدة

#### أ. تحميل تلقائي للبيانات
- عند فتح صفحة تقارير المبيعات، يتم تحميل بيانات اليوم الحالي تلقائياً
- التاريخ الافتراضي هو اليوم الحالي

#### ب. عرض واضح للتوقيت
- إضافة ملاحظة توضيحية أن المبيعات تُحسب من الساعة 7 صباحاً إلى الساعة 7 صباحاً من اليوم التالي
- عرض التوقيت في إجمالي المبيعات

#### ج. إجمالي المصروفات
- عرض إجمالي المصروفات للفترة المحددة
- إمكانية الانتقال لصفحة المصروفات مع التاريخ المحدد
- عرض التاريخ المحدد في رابط المصروفات

## كيفية الاستخدام

### 1. عرض مبيعات اليوم الحالي
- افتح صفحة تقارير المبيعات
- ستظهر مبيعات اليوم الحالي تلقائياً (من الساعة 7 صباحاً إلى الساعة 7 صباحاً من الغد)

### 2. عرض مبيعات يوم محدد
- اختر التاريخ المطلوب في حقل "من"
- اضغط "بحث"
- ستظهر المبيعات من الساعة 7 صباحاً في ذلك اليوم إلى الساعة 7 صباحاً من اليوم التالي

### 3. عرض مبيعات فترة زمنية
- اختر تاريخ البداية في حقل "من"
- اختر تاريخ النهاية في حقل "إلى"
- اضغط "بحث"
- ستظهر المبيعات من الساعة 7 صباحاً في يوم البداية إلى الساعة 7 صباحاً من يوم النهاية

### 4. عرض المصروفات
- بعد عرض المبيعات، ستظهر إجمالي المصروفات أسفل الصفحة
- اضغط على "إجمالي المصروفات" للانتقال لصفحة المصروفات مع التاريخ المحدد

## أمثلة عملية

### مثال 1: مبيعات يوم 15 يناير
- **من**: 15 يناير الساعة 7:00 صباحاً
- **إلى**: 16 يناير الساعة 7:00 صباحاً
- **النتيجة**: جميع المبيعات خلال يوم العمل الكامل

### مثال 2: مبيعات فترة من 15 إلى 17 يناير
- **من**: 15 يناير الساعة 7:00 صباحاً
- **إلى**: 18 يناير الساعة 7:00 صباحاً
- **النتيجة**: جميع المبيعات خلال 3 أيام عمل كاملة

## الفوائد

1. **دقة في التقارير**: حساب المبيعات حسب يوم العمل الفعلي (من 7 صباحاً إلى 7 صباحاً)
2. **سهولة الاستخدام**: تحميل تلقائي لبيانات اليوم الحالي
3. **وضوح المعلومات**: عرض واضح للتوقيت المستخدم في الحسابات
4. **تكامل مع المصروفات**: ربط مباشر مع صفحة المصروفات
5. **مرونة في الاستعلام**: دعم الفترات الزمنية المختلفة
6. **منطقية في العمل**: يمثل يوم عمل كامل من بداية الدوام إلى بداية الدوام التالي

## التوافق

- جميع الميزات السابقة تعمل كما هي
- لا يوجد تأثير على البيانات الموجودة
- التحديث متوافق مع جميع المتصفحات 